"use strict";var reportError=function(e){console.error(e),document.getElementById("password-input").classList.add("has-error"),document.getElementById("error").innerHTML=e},loginResult=function(){console.log(this.status);var e=document.getElementById("submit");if(200===this.status){var t=JSON.parse(this.responseText);e.classList.remove("btn-primary"),e.classList.add("btn-success"),e.innerHTML=t.username+" logged in",window.setTimeout(loggedIntoRosefire(t.token),1e3)}else{console.log(this.status);try{var n=JSON.parse(this.responseText);reportError(n.error)}catch(r){reportError("Could not reach server")}e.disabled=!1}},handleLogin=function(e){e.preventDefault&&e.preventDefault(),document.getElementById("submit").disabled=!0;var t=document.getElementById("username").value,n=document.getElementById("password").value;console.log(t+" to login");var r=new XMLHttpRequest;r.onload=loginResult,r.open("POST","/v2/api/auth",!0),r.setRequestHeader("Content-Type","application/json");var o=JSON.stringify({email:t+"@rose-hulman.edu",password:n,registryToken:registryToken});return console.log(o),r.send(o),!1},form=document.getElementById("signin-form");form.attachEvent?form.attachEvent("submit",handleLogin):form.addEventListener("submit",handleLogin);